<div class="container">
  <div class="row">
    <div class="col-xs-12 col-sm-7">
      <div class="row">
        <div class="col-xs-12" style="background-color:grey">
          <h2> Filtrer par:</h2>
        </div>
        <% @restaurants.each do |restaurant| %>
          <div class="col-xs-12 col-sm-4">
            <h2><%= link_to restaurant.name, restaurant_path(restaurant)%></h2>
            <% if restaurant.picture == nil %>
              <p> pas de photo de dispo bitch </p>
            <% else %>
              <%= image_tag restaurant.picture.url(:medium) %>
            <% end %>
            <p><%= restaurant.description %></p>
              <%= link_to "Delete", restaurant_path(restaurant),
                  method: :delete,
                  data: { confirm: "Are you sure?" } %>
          </div>
        <% end %>
      </div>
    </div>
    <div class="col-xs-12 col-sm-5">
      <div id="map" style="width: 120%; height: 600px; margin-rigth: 0px;">
      </div>
    </div>
  </div>
</div>




<% content_for(:after_js) do %>
  <%= javascript_tag do %>
    $(document).on('ready', function() {
      handler = Gmaps.build('Google');
      handler.buildMap({ internal: { id: 'map' } }, function(){
        markers = handler.addMarkers(<%= raw @markers.to_json %>);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
      });
    })
  <% end %>
<% end %>
